<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1077px" preserveAspectRatio="none" style="width:1396px;height:1077px;" version="1.1" viewBox="0 0 1396 1077" width="1396px" zoomAndPan="magnify"><defs><filter height="300%" id="f1phmd8ai58t5v" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1062.1797" style="stroke: #A80036; stroke-width: 1.0;" width="406.5" x="14" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="197.75" y="16.0669">tetris</text><rect fill="#ADD8E6" height="1062.1797" style="stroke: #A80036; stroke-width: 1.0;" width="137" x="442.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="456.5" y="16.0669">tetris-ws-client</text><rect fill="#ADD8E6" height="1062.1797" style="stroke: #A80036; stroke-width: 1.0;" width="93" x="601.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="636.5" y="16.0669">WS</text><rect fill="#ADD8E6" height="1062.1797" style="stroke: #A80036; stroke-width: 1.0;" width="126" x="784" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="802" y="16.0669">tetris-server</text><rect fill="#ADD8E6" height="1062.1797" style="stroke: #A80036; stroke-width: 1.0;" width="310" x="988" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="1105" y="16.0669">tetris-core</text><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="65.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="924.75"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="103" y="961.8828"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="853.4844"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="322" y="890.6172"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="824.3516"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="643" y="477.8906"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="643" y="795.2188"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="507.0234"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="766.0859"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1041" y="536.1563"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1041" y="694.8203"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1046" y="731.9531"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="114.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1252" y="580.4219"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1257" y="660.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="103" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="103" x2="103" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="103" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="103" x2="103" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="103" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321.5" x2="321.5" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="321.5" x2="321.5" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321.5" x2="321.5" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="321.5" x2="321.5" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321.5" x2="321.5" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510.5" x2="510.5" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="510.5" x2="510.5" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510.5" x2="510.5" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="510.5" x2="510.5" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510.5" x2="510.5" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647.5" x2="647.5" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="647.5" x2="647.5" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647.5" x2="647.5" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="647.5" x2="647.5" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647.5" x2="647.5" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="847" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="847" x2="847" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="847" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="847" x2="847" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="847" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1046" x2="1046" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1046" x2="1046" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1046" x2="1046" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1046" x2="1046" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1046" x2="1046" y1="398.4922" y2="1014.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1257" x2="1257" y1="71.4297" y2="299.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1257" x2="1257" y1="299.3594" y2="327.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1257" x2="1257" y1="327.3594" y2="370.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1257" x2="1257" y1="370.4922" y2="398.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1257" x2="1257" y1="398.4922" y2="1014.8828"/><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="18" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="25" y="56.1279">MultiplayerRemote.tsx</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="18" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="25" y="1033.8779">MultiplayerRemote.tsx</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="227.5" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="234.5" y="56.1279">useMultiplayerRemote.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="227.5" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="234.5" y="1033.8779">useMultiplayerRemote.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="446.5" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="453.5" y="56.1279">RemoteClient.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="446.5" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="453.5" y="1033.8779">RemoteClient.ts</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="605.5" y="68.1279">WebSocket</text><ellipse cx="648" cy="39.1328" fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="636" x2="660" y1="53.1328" y2="53.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="605.5" y="1026.8779">WebSocket</text><ellipse cx="648" cy="1046.1797" fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="636" x2="660" y1="1060.1797" y2="1060.1797"/><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="788" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="795" y="56.1279">MatchPlayer.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="788" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="795" y="1033.8779">MatchPlayer.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="992" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="999" y="56.1279">Multiplayer.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="992" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="999" y="1033.8779">Multiplayer.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="1220" y="36.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="1227" y="56.1279">Tetris.ts</text><rect fill="#FEFECE" filter="url(#f1phmd8ai58t5v)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="1220" y="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="1227" y="1033.8779">Tetris.ts</text><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="65.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="98" y="924.75"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="103" y="961.8828"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="853.4844"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="322" y="890.6172"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="824.3516"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="643" y="477.8906"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="643" y="795.2188"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="507.0234"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="766.0859"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1041" y="536.1563"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1041" y="694.8203"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1046" y="731.9531"/><rect fill="#FFBBBB" filter="url(#f1phmd8ai58t5v)" height="114.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1252" y="580.4219"/><rect fill="#E9967A" filter="url(#f1phmd8ai58t5v)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1257" y="660.6875"/><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1381" x="3" y="101.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="101.9961" y2="101.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="104.9961" y2="104.9961"/><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="92" x="647.5" y="91.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="653.5" y="107.4966">Subscribe</text><polygon fill="#0000FF" points="310,141.6953,320,145.6953,310,149.6953,314,145.6953" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="103" x2="316" y1="145.6953" y2="145.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="110" y="140.6294">use effect hook</text><polygon fill="#0000FF" points="499,170.8281,509,174.8281,499,178.8281,503,174.8281" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="322" x2="505" y1="174.8281" y2="174.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="329" y="169.7622">subscribe</text><polygon fill="#0000FF" points="636,199.9609,646,203.9609,636,207.9609,640,203.9609" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="511" x2="642" y1="203.9609" y2="203.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="518" y="198.895">subscribe</text><polygon fill="#0000FF" points="659,229.0938,649,233.0938,659,237.0938,655,233.0938" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="653" x2="846" y1="233.0938" y2="233.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="665" y="228.0278">subscribe for player actions</text><polygon fill="#0000FF" points="1034,258.2266,1044,262.2266,1034,266.2266,1038,262.2266" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="847" x2="1040" y1="262.2266" y2="262.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="854" y="257.1606">subscribe for state updates</text><polygon fill="#0000FF" points="1245,287.3594,1255,291.3594,1245,295.3594,1249,291.3594" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0;" x1="1046" x2="1251" y1="291.3594" y2="291.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="1053" y="286.2935">subscribe</text><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1381" x="3" y="347.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="347.9258" y2="347.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="350.9258" y2="350.9258"/><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="188" x="599.5" y="337.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="605.5" y="353.4263">Publishing Game State</text><polygon fill="#A80036" points="310,415.625,320,419.625,310,423.625,314,419.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="103" x2="316" y1="419.625" y2="419.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="110" y="414.5591">trigger action (ie. rotate piece)</text><polygon fill="#A80036" points="499,444.7578,509,448.7578,499,452.7578,503,448.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="322" x2="505" y1="448.7578" y2="448.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="329" y="443.6919">trigger action</text><polygon fill="#A80036" points="631,473.8906,641,477.8906,631,481.8906,635,477.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="511" x2="637" y1="477.8906" y2="477.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="518" y="472.8247">send message</text><polygon fill="#0000FF" points="830,503.0234,840,507.0234,830,511.0234,834,507.0234" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="648" x2="836" y1="507.0234" y2="507.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="655" y="501.9575">notify</text><polygon fill="#A80036" points="1029,532.1563,1039,536.1563,1029,540.1563,1033,536.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="847" x2="1035" y1="536.1563" y2="536.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="854" y="531.0903">trigger action</text><polygon fill="#A80036" points="1240,576.4219,1250,580.4219,1240,584.4219,1244,580.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1046" x2="1246" y1="580.4219" y2="580.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="1053" y="560.2231">trigger action for tetris</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="1053" y="575.356">instance representing player</text><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1381" x="3" y="608.9883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="608.9883" y2="608.9883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1384" y1="611.9883" y2="611.9883"/><rect fill="#EEEEEE" filter="url(#f1phmd8ai58t5v)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="206" x="590.5" y="598.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="596.5" y="614.4888">Publishing Player Actions</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1262" x2="1309" y1="647.6875" y2="647.6875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1309" x2="1309" y1="647.6875" y2="660.6875"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1268" x2="1309" y1="660.6875" y2="660.6875"/><polygon fill="#A80036" points="1278,656.6875,1268,660.6875,1278,664.6875,1274,660.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1274" y="642.6216">calc game state</text><polygon fill="#0000FF" points="1062,690.8203,1052,694.8203,1062,698.8203,1058,694.8203" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1056" x2="1256" y1="694.8203" y2="694.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="1068" y="689.7544">notify</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1051" x2="1098" y1="718.9531" y2="718.9531"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1098" x2="1098" y1="718.9531" y2="731.9531"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1057" x2="1098" y1="731.9531" y2="731.9531"/><polygon fill="#A80036" points="1067,727.9531,1057,731.9531,1067,735.9531,1063,731.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1063" y="713.8872">calc game state</text><polygon fill="#0000FF" points="863,762.0859,853,766.0859,863,770.0859,859,766.0859" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="857" x2="1045" y1="766.0859" y2="766.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="869" y="761.02">notify</text><polygon fill="#A80036" points="664,791.2188,654,795.2188,664,799.2188,660,795.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="658" x2="846" y1="795.2188" y2="795.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="670" y="790.1528">send message</text><polygon fill="#0000FF" points="527,820.3516,517,824.3516,527,828.3516,523,824.3516" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="521" x2="647" y1="824.3516" y2="824.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="533" y="819.2856">on receive</text><polygon fill="#0000FF" points="338,849.4844,328,853.4844,338,857.4844,334,853.4844" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="332" x2="510" y1="853.4844" y2="853.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="344" y="848.4185">notify</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="327" x2="374" y1="877.6172" y2="877.6172"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="374" x2="374" y1="877.6172" y2="890.6172"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="333" x2="374" y1="890.6172" y2="890.6172"/><polygon fill="#A80036" points="343,886.6172,333,890.6172,343,894.6172,339,890.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="339" y="872.5513">setState</text><polygon fill="#0000FF" points="119,920.75,109,924.75,119,928.75,115,924.75" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="113" x2="321" y1="924.75" y2="924.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="125" y="919.6841">notify</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="113" x2="155" y1="953.8828" y2="953.8828"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="155" x2="155" y1="953.8828" y2="966.8828"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="114" x2="155" y1="966.8828" y2="966.8828"/><polygon fill="#A80036" points="124,962.8828,114,966.8828,124,970.8828,120,966.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="120" y="948.8169">render</text><!--MD5=[37bb5fef40ac97ed7064893c6bb507c8]
@startuml
skinparam BoxPadding 10
skinparam sequenceArrowThickness 2

participant MultiplayerRemote.tsx
participant useMultiplayerRemote.ts
participant RemoteClient.ts
entity WebSocket
participant MatchPlayer.ts
participant Multiplayer.ts
participant Tetris.ts

box "tetris" #LightBlue
	participant MultiplayerRemote.tsx
	participant useMultiplayerRemote.ts
end box

box "tetris-ws-client" #LightBlue
	participant RemoteClient.ts
end box

box "WS" #LightBlue
	participant WebSocket
end box

box "tetris-server" #LightBlue
	participant MatchPlayer.ts
end box

box "tetris-core" #LightBlue
	participant Multiplayer.ts
	participant Tetris.ts
end box


== Subscribe ==
MultiplayerRemote.tsx -[#0000FF]> useMultiplayerRemote.ts : use effect hook
useMultiplayerRemote.ts -[#0000FF]> RemoteClient.ts : subscribe
RemoteClient.ts -[#0000FF]> WebSocket : subscribe
MatchPlayer.ts -[#0000FF]> WebSocket : subscribe for player actions
MatchPlayer.ts -[#0000FF]> Multiplayer.ts : subscribe for state updates
Multiplayer.ts -[#0000FF]> Tetris.ts : subscribe
...
== Publishing Game State ==
...
MultiplayerRemote.tsx -> useMultiplayerRemote.ts : trigger action (ie. rotate piece)
useMultiplayerRemote.ts -> RemoteClient.ts : trigger action
RemoteClient.ts -> WebSocket : send message
activate WebSocket #FFBBBB
WebSocket -[#0000FF]-> MatchPlayer.ts : notify
deactivate WebSocket
activate MatchPlayer.ts #FFBBBB
MatchPlayer.ts -> Multiplayer.ts : trigger action
deactivate MatchPlayer.ts
activate Multiplayer.ts #FFBBBB
Multiplayer.ts -> Tetris.ts : trigger action for tetris\ninstance representing player
deactivate Multiplayer.ts
activate Tetris.ts #FFBBBB

== Publishing Player Actions ==

Tetris.ts -> Tetris.ts : calc game state
activate Tetris.ts #DarkSalmon
Tetris.ts -[#0000FF]-> Multiplayer.ts : notify
deactivate Tetris.ts
deactivate Tetris.ts
activate Multiplayer.ts #FFBBBB
Multiplayer.ts -> Multiplayer.ts : calc game state
activate Multiplayer.ts #DarkSalmon
Multiplayer.ts -[#0000FF]-> MatchPlayer.ts : notify
deactivate Multiplayer.ts
deactivate Multiplayer.ts
activate MatchPlayer.ts #FFBBBB

MatchPlayer.ts -> WebSocket : send message
deactivate MatchPlayer.ts
activate WebSocket #FFBBBB
WebSocket -[#0000FF]-> RemoteClient.ts : on receive
deactivate WebSocket
activate RemoteClient.ts #FFBBBB
RemoteClient.ts -[#0000FF]-> useMultiplayerRemote.ts : notify
deactivate RemoteClient.ts
activate useMultiplayerRemote.ts #FFBBBB
useMultiplayerRemote.ts -> useMultiplayerRemote.ts : setState
activate useMultiplayerRemote.ts #DarkSalmon
useMultiplayerRemote.ts -[#0000FF]-> MultiplayerRemote.tsx : notify
deactivate useMultiplayerRemote.ts
deactivate useMultiplayerRemote.ts
activate MultiplayerRemote.tsx #FFBBBB
MultiplayerRemote.tsx -> MultiplayerRemote.tsx : render
activate MultiplayerRemote.tsx #DarkSalmon
deactivate MultiplayerRemote.tsx
deactivate MultiplayerRemote.tsx
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>