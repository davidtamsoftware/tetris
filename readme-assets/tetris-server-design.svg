<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="329px" preserveAspectRatio="none" style="width:929px;height:329px;" version="1.1" viewBox="0 0 929 329" width="929px" zoomAndPan="magnify"><defs><filter height="300%" id="f1y2ia7lkz1nqa" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster tetris-server--><polygon fill="#FFFFFF" filter="url(#f1y2ia7lkz1nqa)" points="35,24,141,24,148,46.2969,907,46.2969,907,194,35,194,35,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="35" x2="148" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="39" y="38.9951">tetris-server</text><!--cluster tetris-core--><polygon fill="#FFFFFF" filter="url(#f1y2ia7lkz1nqa)" points="414,218,504,218,511,240.2969,546,240.2969,546,317,414,317,414,218" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="414" x2="511" y1="240.2969" y2="240.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="418" y="232.9951">tetris-core</text><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="33.9688" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="51" y="101.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="58" y="114.6387">app.ts</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="52" x2="104" y1="119.4688" y2="119.4688"/><!--class MatchService--><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="112.0234" id="MatchService" style="stroke: #A80036; stroke-width: 1.5;" width="236" x="148" y="63"/><ellipse cx="220.25" cy="79" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M222.5938,74.6719 L222.7656,74.75 C222.9844,74.4375 223.1875,74.3438 223.4844,74.3438 C223.7813,74.3438 224.0625,74.4844 224.2188,74.75 C224.3125,74.9063 224.3281,75.0313 224.3281,75.4688 L224.3281,76.8906 C224.3281,77.3125 224.2969,77.5 224.1875,77.6563 C224.0156,77.875 223.75,78.0156 223.4844,78.0156 C223.2656,78.0156 223.0313,77.9063 222.8906,77.7656 C222.75,77.6406 222.7188,77.5156 222.6563,77.1094 C222.5625,76.7031 222.3906,76.4844 221.9063,76.2031 C221.4375,75.9531 220.8281,75.7969 220.25,75.7969 C218.5156,75.7969 217.2656,77.1094 217.2656,78.8906 L217.2656,79.9844 C217.2656,81.6875 218.5625,82.7813 220.6094,82.7813 C221.375,82.7813 222.0625,82.6563 222.4844,82.3906 C222.6719,82.2969 222.6719,82.2969 223.125,81.8125 C223.3125,81.625 223.5156,81.5469 223.7344,81.5469 C224.2031,81.5469 224.5938,81.9375 224.5938,82.3906 C224.5938,82.7813 224.2656,83.2344 223.6875,83.6406 C222.9375,84.1875 221.7813,84.4844 220.5625,84.4844 C217.6719,84.4844 215.5625,82.5938 215.5625,80.0156 L215.5625,78.8906 C215.5625,76.1719 217.5625,74.0938 220.1875,74.0938 C221.0625,74.0938 221.6563,74.2344 222.5938,74.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="240.75" y="83.1543">MatchService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="149" x2="383" y1="95" y2="95"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="156" y="103.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="168" y="109.2104">Match[] _matches</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="149" x2="383" y1="115.8047" y2="115.8047"/><ellipse cx="159" cy="127.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="168" y="130.0151">Match[] matches()</text><ellipse cx="159" cy="140.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="168" y="142.8198">Match findMatch(player: MatchPlayer)</text><ellipse cx="159" cy="153.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="168" y="155.6245">void playerExit(player: MatchPlayer)</text><ellipse cx="159" cy="166.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="168" y="168.4292">Match getOrCreate(matchId: string)</text><!--class Match--><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="112.0234" id="Match" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="435" y="64"/><ellipse cx="487.75" cy="80" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490.0938,75.6719 L490.2656,75.75 C490.4844,75.4375 490.6875,75.3438 490.9844,75.3438 C491.2813,75.3438 491.5625,75.4844 491.7188,75.75 C491.8125,75.9063 491.8281,76.0313 491.8281,76.4688 L491.8281,77.8906 C491.8281,78.3125 491.7969,78.5 491.6875,78.6563 C491.5156,78.875 491.25,79.0156 490.9844,79.0156 C490.7656,79.0156 490.5313,78.9063 490.3906,78.7656 C490.25,78.6406 490.2188,78.5156 490.1563,78.1094 C490.0625,77.7031 489.8906,77.4844 489.4063,77.2031 C488.9375,76.9531 488.3281,76.7969 487.75,76.7969 C486.0156,76.7969 484.7656,78.1094 484.7656,79.8906 L484.7656,80.9844 C484.7656,82.6875 486.0625,83.7813 488.1094,83.7813 C488.875,83.7813 489.5625,83.6563 489.9844,83.3906 C490.1719,83.2969 490.1719,83.2969 490.625,82.8125 C490.8125,82.625 491.0156,82.5469 491.2344,82.5469 C491.7031,82.5469 492.0938,82.9375 492.0938,83.3906 C492.0938,83.7813 491.7656,84.2344 491.1875,84.6406 C490.4375,85.1875 489.2813,85.4844 488.0625,85.4844 C485.1719,85.4844 483.0625,83.5938 483.0625,81.0156 L483.0625,79.8906 C483.0625,77.1719 485.0625,75.0938 487.6875,75.0938 C488.5625,75.0938 489.1563,75.2344 490.0938,75.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="508.25" y="84.1543">Match</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="436" x2="586" y1="96" y2="96"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="441" y="110.2104">MatchPlayer _player1</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="441" y="123.0151">MatchPlayer _player2</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="441" y="135.8198">Multiplayer game</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="436" x2="586" y1="142.4141" y2="142.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="441" y="156.6245">MatchPlayer getPlayer1()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="441" y="169.4292">MatchPlayer getPlayer2()</text><!--class MatchPlayer--><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="60.8047" id="MatchPlayer" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="638" y="88.5"/><ellipse cx="653" cy="104.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M655.3438,100.1719 L655.5156,100.25 C655.7344,99.9375 655.9375,99.8438 656.2344,99.8438 C656.5313,99.8438 656.8125,99.9844 656.9688,100.25 C657.0625,100.4063 657.0781,100.5313 657.0781,100.9688 L657.0781,102.3906 C657.0781,102.8125 657.0469,103 656.9375,103.1563 C656.7656,103.375 656.5,103.5156 656.2344,103.5156 C656.0156,103.5156 655.7813,103.4063 655.6406,103.2656 C655.5,103.1406 655.4688,103.0156 655.4063,102.6094 C655.3125,102.2031 655.1406,101.9844 654.6563,101.7031 C654.1875,101.4531 653.5781,101.2969 653,101.2969 C651.2656,101.2969 650.0156,102.6094 650.0156,104.3906 L650.0156,105.4844 C650.0156,107.1875 651.3125,108.2813 653.3594,108.2813 C654.125,108.2813 654.8125,108.1563 655.2344,107.8906 C655.4219,107.7969 655.4219,107.7969 655.875,107.3125 C656.0625,107.125 656.2656,107.0469 656.4844,107.0469 C656.9531,107.0469 657.3438,107.4375 657.3438,107.8906 C657.3438,108.2813 657.0156,108.7344 656.4375,109.1406 C655.6875,109.6875 654.5313,109.9844 653.3125,109.9844 C650.4219,109.9844 648.3125,108.0938 648.3125,105.5156 L648.3125,104.3906 C648.3125,101.6719 650.3125,99.5938 652.9375,99.5938 C653.8125,99.5938 654.4063,99.7344 655.3438,100.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="667" y="108.6543">MatchPlayer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="639" x2="745" y1="120.5" y2="120.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="644" y="134.7104">any uuid</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="639" x2="745" y1="141.3047" y2="141.3047"/><!--class WebSocket--><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="48" id="WebSocket" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="789" y="94.5"/><ellipse cx="804" cy="110.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M806.3438,106.1719 L806.5156,106.25 C806.7344,105.9375 806.9375,105.8438 807.2344,105.8438 C807.5313,105.8438 807.8125,105.9844 807.9688,106.25 C808.0625,106.4063 808.0781,106.5313 808.0781,106.9688 L808.0781,108.3906 C808.0781,108.8125 808.0469,109 807.9375,109.1563 C807.7656,109.375 807.5,109.5156 807.2344,109.5156 C807.0156,109.5156 806.7813,109.4063 806.6406,109.2656 C806.5,109.1406 806.4688,109.0156 806.4063,108.6094 C806.3125,108.2031 806.1406,107.9844 805.6563,107.7031 C805.1875,107.4531 804.5781,107.2969 804,107.2969 C802.2656,107.2969 801.0156,108.6094 801.0156,110.3906 L801.0156,111.4844 C801.0156,113.1875 802.3125,114.2813 804.3594,114.2813 C805.125,114.2813 805.8125,114.1563 806.2344,113.8906 C806.4219,113.7969 806.4219,113.7969 806.875,113.3125 C807.0625,113.125 807.2656,113.0469 807.4844,113.0469 C807.9531,113.0469 808.3438,113.4375 808.3438,113.8906 C808.3438,114.2813 808.0156,114.7344 807.4375,115.1406 C806.6875,115.6875 805.5313,115.9844 804.3125,115.9844 C801.4219,115.9844 799.3125,114.0938 799.3125,111.5156 L799.3125,110.3906 C799.3125,107.6719 801.3125,105.5938 803.9375,105.5938 C804.8125,105.5938 805.4063,105.7344 806.3438,106.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="818" y="114.6543">WebSocket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="790" x2="890" y1="126.5" y2="126.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="790" x2="890" y1="134.5" y2="134.5"/><!--class Multiplayer--><rect fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" height="48" id="Multiplayer" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="430.5" y="253"/><ellipse cx="445.5" cy="269" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M447.8438,264.6719 L448.0156,264.75 C448.2344,264.4375 448.4375,264.3438 448.7344,264.3438 C449.0313,264.3438 449.3125,264.4844 449.4688,264.75 C449.5625,264.9063 449.5781,265.0313 449.5781,265.4688 L449.5781,266.8906 C449.5781,267.3125 449.5469,267.5 449.4375,267.6563 C449.2656,267.875 449,268.0156 448.7344,268.0156 C448.5156,268.0156 448.2813,267.9063 448.1406,267.7656 C448,267.6406 447.9688,267.5156 447.9063,267.1094 C447.8125,266.7031 447.6406,266.4844 447.1563,266.2031 C446.6875,265.9531 446.0781,265.7969 445.5,265.7969 C443.7656,265.7969 442.5156,267.1094 442.5156,268.8906 L442.5156,269.9844 C442.5156,271.6875 443.8125,272.7813 445.8594,272.7813 C446.625,272.7813 447.3125,272.6563 447.7344,272.3906 C447.9219,272.2969 447.9219,272.2969 448.375,271.8125 C448.5625,271.625 448.7656,271.5469 448.9844,271.5469 C449.4531,271.5469 449.8438,271.9375 449.8438,272.3906 C449.8438,272.7813 449.5156,273.2344 448.9375,273.6406 C448.1875,274.1875 447.0313,274.4844 445.8125,274.4844 C442.9219,274.4844 440.8125,272.5938 440.8125,270.0156 L440.8125,268.8906 C440.8125,266.1719 442.8125,264.0938 445.4375,264.0938 C446.3125,264.0938 446.9063,264.2344 447.8438,264.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="459.5" y="273.1543">Multiplayer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="431.5" x2="528.5" y1="285" y2="285"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="431.5" x2="528.5" y1="293" y2="293"/><ellipse cx="11" cy="118.5" fill="#FEFECE" filter="url(#f1y2ia7lkz1nqa)" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="19" x="1.5" y="134.6387">WS</text><path d="M565,264.5 L565,289.6328 A0,0 0 0 0 565,289.6328 L879,289.6328 A0,0 0 0 0 879,289.6328 L879,274.5 L869,264.5 L723.756,264.5 L698.362,152.69 L715.756,264.5 L565,264.5 A0,0 0 0 0 565,264.5 " fill="#FBFB77" filter="url(#f1y2ia7lkz1nqa)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M869,264.5 L869,274.5 L879,274.5 L869,264.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="571" y="281.5669">Abstraction layer over remote player identifier</text><path d="M31,264.5 L31,289.6328 A0,0 0 0 0 31,289.6328 L125,289.6328 A0,0 0 0 0 125,289.6328 L125,274.5 L115,264.5 L82,264.5 L78,135.659 L74,264.5 L31,264.5 A0,0 0 0 0 31,264.5 " fill="#FBFB77" filter="url(#f1y2ia7lkz1nqa)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M115,264.5 L115,274.5 L125,274.5 L115,264.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="37" y="281.5669">Web Server</text><!--link applol80752 to app--><path d="M16.2344,118.5 C27.8154,118.5 39.3965,118.5 50.9775,118.5 " fill="none" id="applol80752-app" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MatchService to Match--><path d="M385,105.5 C398.527,105.5 412.834,106.263 426.75,107.418 " fill="none" id="MatchService-Match" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="419.75,92.418,423.4956,98.58,430.6242,97.4926,426.8786,91.3306,419.75,92.418" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392.1109" y="101.356">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="419.75" y="104.4849">*</text><!--link Match to MatchPlayer--><path d="M588,106.5 C601.592,106.5 616.126,107.544 629.864,109.016 " fill="none" id="Match-MatchPlayer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="629.864,109.016,621.3414,104.0799,624.8925,108.4833,620.4891,112.0344,629.864,109.016" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Match to MatchPlayer--><path d="M588,118.5 C601.501,118.5 615.997,118.5 629.727,118.5 " fill="none" id="Match-MatchPlayer-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="629.727,118.5,620.727,114.5,624.727,118.5,620.727,122.5,629.727,118.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Match to Multiplayer--><path d="M434,130.5 C384.951,130.5 430.907,206.601 460.105,248.7293 " fill="none" id="Match-Multiplayer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="463.049,252.9451,461.174,243.2764,460.1856,248.8462,454.6158,247.8578,463.049,252.9451" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MatchPlayer to WebSocket--><path d="M747,130.5 C760.53,130.5 775.087,129.208 788.539,127.472 " fill="none" id="MatchPlayer-WebSocket" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="788.539,127.472,779.1011,124.6568,783.5801,128.112,780.125,132.591,788.539,127.472" style="stroke: #A80036; stroke-width: 1.0;"/><!--link app to MatchService--><path d="M105.1719,118.5 C114.98,118.5 124.788,118.5 134.596,118.5 " fill="none" id="app-MatchService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="139.725,118.5,130.725,114.5,134.725,118.5,130.725,122.5,139.725,118.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
Allow_mixing
top to bottom direction

package tetris-server {
   object "app.ts" as app
   class MatchService
   MatchService : - Match[] _matches
   MatchService : + Match[] matches()
   MatchService : + Match findMatch(player: MatchPlayer)
   MatchService : + void playerExit(player: MatchPlayer)
   MatchService : + Match getOrCreate(matchId: string)

   class Match
   Match : MatchPlayer _player1
   Match : MatchPlayer _player2
   Match : Multiplayer game
   Match : MatchPlayer getPlayer1()
   Match : MatchPlayer getPlayer2()

   class MatchPlayer
   MatchPlayer : any uuid

   class WebSocket
}

package tetris-core {
   class Multiplayer
}

WS ()- app
Match "*" *-left- "1" MatchService::_matches
Match::player1 -right-> MatchPlayer
Match::player2 -right-> MatchPlayer
Match::game -down-> Multiplayer
MatchPlayer::uuid -right-> WebSocket
app -right-> MatchService
note "Abstraction layer over remote player identifier" as MatchPlayerNote
note "Web Server" as appNote

MatchPlayer .. MatchPlayerNote
app .. appNote
@enduml

PlantUML version 1.2019.07(Mon Jun 24 19:59:20 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>